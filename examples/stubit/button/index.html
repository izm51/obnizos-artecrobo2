<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://obniz.io/js/jquery-3.2.1.min.js"></script>
  <script src="https://unpkg.com/obniz@2.2.0/obniz.js"></script>
  <script src="../../../artec.js"></script>
</head>
<body>

<div id="obniz-debug"></div>
<h1>obniz instant HTML</h1>
<br/>
<h2>Status</h2>
buttonA:<span id="is-pressed-buttonA"></span><br/>
buttonB:<span id="is-pressed-buttonB"></span>
<br/><br/>
<h2>Get presses</h2>
<button id="get-presses">Get presses</button><br />
buttonA:<span id="get-presses-buttonA">-</span><br/>
buttonB:<span id="get-presses-buttonB">-</span>
<br/><br/>
<h2>Was pressed</h2>
<button id="was-pressed">Was pressed</button><br />
buttonA:<span id="was-pressed-buttonA">-</span><br />
buttonB:<span id="was-pressed-buttonB">-</span>

<script>

  // var stubit = new Artec.StuduinoBit("YOUR_STUDUIOBIT_ID");
  var stubit = new Artec.StuduinoBit("69292984");
  stubit.onconnect = async function () {

    $("#get-presses").click(async () => {
      let pressesA = await stubit.button_a.getPresses();
      let pressesB = await stubit.button_b.getPresses();
      $("#get-presses-buttonA").text(pressesA);
      $("#get-presses-buttonB").text(pressesB);
    })

    $("#was-pressed").click(async () => {
      let wasPressedA = await stubit.button_a.wasPressed();
      let wasPressedB = await stubit.button_b.wasPressed();
      $("#was-pressed-buttonA").text(wasPressedA);
      $("#was-pressed-buttonB").text(wasPressedB);
    })

    while(1){
      let pressedA = await stubit.button_a.isPressedWait();
      let pressedB = await stubit.button_b.isPressedWait();
      $("#is-pressed-buttonA").text(pressedA ? "Pressed" : "none");
      $("#is-pressed-buttonB").text(pressedB ? "Pressed" : "none");
    }

    //wifi接続／動作確認用
    ledBlink();
  }



  async function ledBlink() {
    while (1) {
      stubit.led.on();
      await stubit.wait(500);
      stubit.led.off();
      await stubit.wait(500);
    }
  }

</script>
</body>
</html>